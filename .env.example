# ===========================================
# SERVICE CONFIGURATION
# ===========================================
SERVICE_TYPE=run-processor  # Options: run-processor, message-worker, api
NODE_ENV=production

# ===========================================
# REDIS CONFIGURATION (Local Container)
# ===========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_change_me
REDIS_DB=0

# ===========================================
# POSTGRESQL CONFIGURATION (Local Container)
# ===========================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_postgres_password_change_me
POSTGRES_DB=message_sender
POSTGRES_SCHEMA=public

# ===========================================
# SUPABASE CONFIGURATION (Cloud)
# ===========================================
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJxxx...

# ===========================================
# WORKER CONFIGURATION
# ===========================================
WORKER_CONCURRENCY=50  # Number of concurrent jobs per worker
MAX_SOCKETS=500  # HTTP connection pool size
POLL_INTERVAL_MS=10000  # Run processor polling interval (10s)

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
LOG_LEVEL=info  # Options: error, warn, info, debug
LOG_BATCH_SIZE=200  # Number of logs to batch before insert
LOG_BATCH_INTERVAL_MS=2000  # Max time to wait before flushing batch (2s)
LOG_RETENTION_DAYS=7  # Days to keep logs before cleanup

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_MAX_JOBS_PER_SECOND=100  # Global rate limit
RATE_LIMIT_PER_PAGE=50  # Rate limit per Facebook page

# ===========================================
# CIRCUIT BREAKER
# ===========================================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5  # Failures before opening circuit
CIRCUIT_BREAKER_TIMEOUT_MS=300000  # 5 minutes timeout

# ===========================================
# API SERVER
# ===========================================
API_PORT=3000
API_ENABLE_BULL_BOARD=true
